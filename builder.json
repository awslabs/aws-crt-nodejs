{
    "name": "aws-crt-nodejs",
    "hosts": {
        "linux": {
            "architectures": {
                "x64": {
                    "image": "123124136734.dkr.ecr.us-east-1.amazonaws.com/aws-common-runtime/nodejs:10"
                },
                "x86": {
                    "enabled": false
                }
            }
        },
        "al2012": {
            "enabled": false
        },
        "manylinux": {
            "enabled": false
        },
        "windows": {
            "enabled": false
        }
    },
    "targets": {
        "android": {
            "enabled": false
        }
    },
    "upstream": [],
    "downstream": [],
    "build": [
        ["git", "submodule", "update", "--init", "--recursive"],
        ["npm", "install", "--ignore-scripts"],
        [
            "npm", "run-script", "cmake", "--", "compile",
            "--cc={c}", "--cxx={cxx}",
            "--out={build_dir}",
            "--CDCMAKE_PREFIX_PATH=/opt/openssl",
            "--CDCMAKE_EXPORT_COMPILE_COMMANDS=ON",
            "-T", "install", "--debug"
        ],
        ["npm", "run-script", "tsc"]
    ],
    "test": [
        ["node", "-p", "require('./dist/index')"],
        ["env", "AWS_CRT_MEMORY_TRACING=2", "npm", "test", "--", "--verbose", "--detectOpenHandles"]
    ]
}
