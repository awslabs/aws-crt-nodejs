{
    "name": "aws-crt-nodejs",
    "packages": [
        "nodejs"
    ],
    "hosts": {
        "manylinux": {
            "enabled": false
        }
    },
    "targets": {
        "android": {
            "enabled": false
        },
        "linux": {
            "x86": {
                "enabled": false
            }
        }
    },
    "imports": ["s2n"],
    "upstream": [],
    "downstream": [],
    "build_steps": [
        ["git", "submodule", "update", "--init", "--recursive"],
        ["npm", "install", "--ignore-scripts"],
        [
            "node", "node_modules/.bin/cmake-js", "compile",
            "--cc={c}", "--cxx={cxx}",
            "--out={build_dir}",
            "--CDCMAKE_PREFIX_PATH=/opt/openssl",
            "--CDCMAKE_EXPORT_COMPILE_COMMANDS=ON",
            "-T", "install"
        ],
        ["npm", "run-script", "tsc"]
    ],
    "test_steps": [
        ["node", "-p", "require('./dist/index')"],
        ["env", "AWS_CRT_MEMORY_TRACING=2", "npm", "test"]
    ]
}
